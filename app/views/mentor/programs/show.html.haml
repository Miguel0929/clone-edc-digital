.container-fluid.container-fixed-lg.top-container-padding
  %section.demo-bg-section.p-b-0.p-t-75
    .container
      .md-p-l-20.md-p-r-20.xs-no-padding
        %h5.pull-left.block-title.hint-text.no-margin.text-white Programa de Aprendizaje
        .pull-right
          Rating: 
          = @program.rating
        .row.col-md-12
          .col-sm-5.col-md-4
            %h2.m-t-5.text-white
              = @program.name
          .col-sm-7.col-md-8.no-padding.xs-p-l-15.xs-p-r-15.text-white
            .p-t-20.p-l-35.md-p-l-5.md-p-t-15
              %p
                = @program.description
        
        .row.col-sm-12.p-b-10
          .pull-right
            %span.pull-left.m-r-10{:style => "color:#dddddd"}
              Califica este curso:
            %span.pull-right.rating
              = render partial: "layouts/stars", locals: {value: @program, route: ratings_vote_program_path}   

.container-fluid.container-fixed-lg
  .row
    .col-sm-12
      .panel.panel-transparent
        .panel-heading
          .panel-title
            Detalles del contenido
        .panel-body
          - @program.chapters.each do |chapter|
            .sm-m-l-5.sm-m-r-5
              #accordion.panel-group{"aria-multiselectable" => "true", :role => "tablist"}
                .panel.panel-default
                  .panel-heading{:role => "tab", :id=>"heading_#{chapter.id}"}
                    %h4.panel-title
                      %a{"aria-controls" => "collapse_#{chapter.id}", "aria-expanded" => "false", "data-parent" => "#accordion", "data-toggle" => "collapse", :href => "#collapse_#{chapter.id}"}
                        = "#{chapter.name} (#{chapter.points} puntos)"

                  .panel-collapse.collapse{:id=>"collapse_#{chapter.id}", "aria-labelledby" => "heading_#{chapter.id}", :role => "tabpanel"}
                    .panel-body
                      %table.table.table-striped.table-top-border
                        %tbody
                          - chapter.chapter_contents.each do |content|
                            %tr.odd.gradeX
                              %td{style: "width: 5%;"}
                                = link_to mentor_chapter_content_path(content), class: "btn btn-default btn-rounded redirector" do
                                  - if content.coursable_type == 'Lesson'
                                    %i.fa.fa-youtube-play
                                  - elsif content.coursable_type == 'Question'
                                    %i.fa.fa-tasks

                              %td{style: "width: 60%;"}
                                - if content.coursable_type == 'Lesson'
                                  = content.model.identifier
                                - elsif content.coursable_type == 'Question'
                                  = content.model.question_text
                              %td
                                - if content.coursable_type == 'Question'
                                  Comentarios
                                  %span.badge
                                    = content.model.comments_for(current_user)
:javascript
  var frm = $('#form_rank');
  $('.rank').click(function() {
    frm.submit();
  });
  frm.submit(function (ev) {
    console.log(9);
    $.ajax({
        type: frm.attr('method'),
        url: frm.attr('action'),
        data: frm.serialize(),
        success: function (data) {
          console.log(data);
        },
        error: function (data){
        }
    });
    ev.preventDefault();
  });

