- content_for :title  do
	Panel de progreso - EDC Digital

/= if @programs then @programs.map{|pg| pg.id} end
.container-fluid.container-fixed-lg
	.panel.panel-default
		.panel-heading
			.row
				.col-sm-12
					.panel-title
						Progreso de mis alumnos
		.panel-body
			.row.m-t-10
				.col-sm-12
					.pull-left.w-500
						= form_tag(matrix_progress_panel_index_path, method: :get, class: "panel-filter-width") do
							.row.m-b-15
								.col-md-7
									= select_tag :group, options_from_collection_for_select(@groups, :id, :name, params[:group]), {include_blank: "Elige uno de tus grupos", class: "form-control" }
								.col-md-5
									= submit_tag 'Ver progreso', class: "btn btn-success btn-xs"
									%span{"data-original-title" => "Refrescar búsqueda", "data-toggle" => "tooltip", "data-placement" => "right"}
										= link_to matrix_progress_panel_index_path, class: "btn btn-info btn-xs p-r-10 p-l-10" do
											%i.fa.fa-circle-o-notch
			/Aquí abajo va la tabla, a la altura del .row.m-t-10
			- if @programs
				.row
					#staticHeads
						.col-sm-3.p-r-0
							%table.table.colored-columns.m-t-0
								%thead.static-heads
									%tr
										%th
											Nombre
								%tbody
									- @students.each do |student|
										%tr
											%td.padding-0.border-none
												.cell-like
													= student.name
						- if @programs
							.col-sm-9.p-l-0
								.horizontal-overflow
									%table.table.colored-columns.m-t-0
										%thead.static-heads
											%tr
												%th
													Correo electrónico
												%th
													Inbox
												- @programs.each do |program|
													%th{colspan: "4"}
														= truncate(program.name, length: 40) + ' ' + '(' + program.short_name + ')'
										%tbody
											- @students.each do |student|
												%tr
													%td.padding-0
														.cell-like
															= student.email
													%td.padding-0
														.cell-like.text-center
															= student.mailbox.inbox.count
													- coloring = 1
													- @programs.each do |program|
														- coloring = (coloring == 1 ? 0 : 1)
														- stat = student.get_program_stat(program)
														%td.padding-0{style: "width:115px;", class: coloring == 1 ? 'light' : 'dark'}
															.cell-like
																Contestado:
																= stat.nil? ? "N/A" : stat.program_progress.round
														%td.padding-0{style: "width:115px;", class: coloring == 1 ? 'light' : 'dark'}
															.cell-like
																Visto:
																= stat.nil? ? "N/A" : stat.program_seen.round
														%td.padding-0{style: "width:115px;", class: coloring == 1 ? 'light' : 'dark'}
															.cell-like
																Fecha:
																10/10/10
														%td.padding-0{style: "width:115px;", class: coloring == 1 ? 'light' : 'dark'}
															.cell-like
																Envío:
																Inbox

:javascript
	
	var heads = $("#staticHeads").find('thead');
	document.getElementById("staticHeads").addEventListener("scroll",function(){
		var translate = "translate(0," + this.scrollTop + "px)";
		heads.css("transform", translate);
	});
