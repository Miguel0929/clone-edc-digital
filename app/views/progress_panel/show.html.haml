.container-fluid.container-fixed-lg
	.panel.panel-default
		.panel-heading
			.row
				.col-sm-12
					.panel-title
						Progreso de grupo: 
						%span.text-primary
							#{@group.name}
		.panel-body
			.row.m-b-40.m-t-10
				.col-sm-12
					.pull-left
						= form_tag(progress_panel_path(@group), method: :get) do
							= select_tag :group, options_from_collection_for_select(Group.all, :id, :name, params[:group]), {include_blank: "Filtra por grupo", class: "form-control" }
							= submit_tag 'Filtrar por grupo', class: "btn btn-success"  
					.pull-right
						= link_to progress_panel_index_path do
							.btn.btn-info
								%i.fa.fa-globe
								Ver progreso general de EDC
						- if current_user.mentor?
							= link_to mentor_groups_path do
								.btn.btn-info
									%i.fa.fa-group
									Regresar a mis grupos
			.row.m-b-80
				.col-sm-4
					.col-sm-12
						%h3.p-b-20 Alumos de grupo
						= pie_chart [["Alumnos activos", @active_users.count], ["Alumnos inactivos", @inactive_users]]
					.col-sm-12.text-center
						Alumnos activos: #{@active_users.count} / Alumnos inactivos: #{@inactive_users}
				.col-sm-8
					%h3.p-b-20 Distribución general de avances de alumnos	
					- #total_sum = @hundred + @seventy + @fifty + @thirty
					= #column_chart [["0% a 29%", ((@thirty.to_f / total_sum) * 100).round(1)], ["30% a 49%", ((@fifty.to_f / total_sum) * 100).round(1)], ["50% a 69%", ((@seventy.to_f / total_sum) * 100).round(1)], ["70% a 100%", ((@hundred.to_f / total_sum) * 100).round(1)]], colors: ["#6D5CAE"]
					= column_chart [["0% a 29%", @thirty], ["30% a 49%", @fifty], ["50% a 69%", @seventy], ["70% a 100%", @hundred]], colors: ["#6D5CAE"]
			.row.m-b-80
				.col-sm-12
					%h3.p-b-10 Distribución de avances por programa
					%table.table.table-striped
						%thead
							%tr
								%th
									Programa
								%th.text-center
									0% a 29%
								%th.text-center
									30% a 49%
								%th.text-center
									50% a 69%
								%th.text-center
									70% a 100%
						%tbody
							- @group.programs.each do |program|
								%tr
									- program_stat = get_group_progress_strata(@group, program)
									- hundred, seventy, fifty, thirty, sumatory = program_stat[0], program_stat[1], program_stat[2], program_stat[3]#, program_stat.inject(0){|sum,x| sum + x } 
									%td.p-b-15
										= program.name
										= program.id
									%td.text-center.p-b-15
										=# ((thirty.to_f / sumatory) * 100).round(1)
										= thirty
									%td.text-center.p-b-15
										=# ((fifty.to_f / sumatory) * 100).round(1)
										= fifty
									%td.text-center.p-b-15
										=# ((seventy.to_f / sumatory) * 100).round(1)
										= seventy
									%td.text-center.p-b-15
										=# ((hundred.to_f / sumatory) * 100).round(1)
										= hundred
			.row.m-b-40
				%h3.p-b-10.p-l-15 Distribución de avances por programa
				- @group.programs.each do |program|
					- program_stat = get_group_progress_strata(@group, program)
					- hundred, seventy, fifty, thirty, sumatory = program_stat[0], program_stat[1], program_stat[2], program_stat[3], program_stat.inject(0){|sum,x| sum + x }
					.col-sm-6
						%h4
							= truncate(program.name, :length => 45, :separator => ' ')
							(#{sumatory})
						.padding-30
							= #bar_chart [["0% a 29%", ((thirty.to_f / sumatory) * 100).round(1)], ["30% a 49%", ((fifty.to_f / sumatory) * 100).round(1)], ["50% a 69%", ((seventy.to_f / sumatory) * 100).round(1)], ["70% a 100%", ((hundred.to_f / sumatory) * 100).round(1)]]
							= bar_chart [["0% a 29%", thirty], ["30% a 49%", fifty], ["50% a 69%", seventy], ["70% a 100%", hundred]]
