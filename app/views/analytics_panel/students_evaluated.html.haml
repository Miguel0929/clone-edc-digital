- content_for :title  do
  Analíticos de grupo - EDC Digital

.container-fluid.container-fixed-lg
  .panel.panel-default
    .panel-body 
      .row
        .pull-right
          = link_to create_students_evaluated_analytics_panel_index_path, method: :post, class: "btn btn-primary" do
            - if @total_alumnos_program.first.nil?
              %ul.p-l-5.m-b-0
                %li.inline.p-l-0
                  %i.fa.fa-rotate-right
                %li.inline
                  Generar estadísticas

            - else
              %ul.p-l-5.m-b-0
                %li.inline.p-l-0
                  %i.fa.fa-rotate-right
                %li.inline
                  Actualizar estadísticas
              %ul.p-l-20.m-b-0{:style => "font-size: 0.8em;"}
                %li.inline
                  * Última vez:
                  = l @total_alumnos_program.first.updated_at, format: :short_no_year
  .panel.panel-default        
    .panel-heading
      %h4 Alumnos evaluados
    .panel-body
      .row
        %table.table.colored-columns.m-t-0
          %thead.static-heads
            %tr
              %th.padding-0.border-none.bold
                .cell-like Programa
              %th.padding-0.border-none.bold
                .cell-like Total de alumnos
              %th.padding-0.border-none.bold
                .cell-like  Evaluaciones realizadas
              %th.padding-0.border-none.bold
                .cell-like  Evaluaciones pendientes   
          %tbody#total_alumnos_program
            - if @total_alumnos_program.present?
              - @total_alumnos_program.each do |students|
                %tr
                  %td.bold
                    = students.program.name
                  %td.text-center= students.total 
                  %td.text-center= students.evaluados 
                  %td.text-center= students.no_evaluados
            - else 
              %tr
                %td.bold.text-center{colspan: 4}
                  Estadisticas no generadas     

                     
    .panel-heading
      %h4 Puntajes de todos los alumnos evaluados *
    .panel-body
      .row
        %table.table.colored-columns.m-t-0
          %thead.static-heads
            %tr
              %th.text-center
                Programa
              %th.padding-0.border-none.bold.text-center
                .cell-like 90% - 100%
              %th.padding-0.border-none.bold.text-center
                .cell-like  80% - 89%
              %th.padding-0.border-none.bold.text-center
                .cell-like  60% - 79%   
              %th.padding-0.border-none.bold.text-center
                .cell-like  0% - 59%
              %th.padding-0.border-none.bold.text-center
                .cell-like  Total:              

          %tbody#total_alumnos_program_rango
            - if @total_alumnos_program_rango.present?
              - @total_alumnos_program_rango.each do |program|
                - total = program.rango1 + program.rango2 + program.rango3 + program.rango4 
                %tr
                  %td.bold= program.program.name
                  %td.text-center= program.rango1
                  %td.text-center= program.rango2
                  %td.text-center= program.rango3
                  %td.text-center= program.rango4
                  %td.text-center= total
            - else    
              %tr
                %td.bold.text-center{colspan: 6}
                  Estadisticas no generadas    
      .row
        .col-md-12
          %i * En el puntaje solo se toman en cuenta las rúbricas evaluadas en los programas