- content_for :title  do
  Programa - EDCdigital

.container
  .row
    .col-md-12
      %h3
        Módulos del programa
      .panel.panel-default
        .panel-heading
          %h3.panel-title
            = @program.name
          .pull-right
            Rating: 
            = @program.rating.round(2)
        .panel-body
          .sortable{'data-update-url'=> url_prod_helper(sort_program_chapters_url(@program))}
            - @program.chapters.each do |chapter|
              #accordion.card.card-default{"aria-multiselectable" => "true", :role => "tablist", id: "chapter_#{chapter.id}"}
                .modules-heading-card
                  .pull-left
                    %span.handle-sort
                      [mover]
                  .pull-right
                    %ul.no-style.unstyled.m-b-0.p-l-40.modules-menu-list
                      %li
                        = link_to content_chapter_path(chapter) do
                          %i.fa.fa-briefcase
                          Contenido
                      %li
                        = link_to rubrics_chapter_path(chapter) do
                          %i.fa.fa-tasks
                          Rúbricas
                      %li
                        = link_to edit_program_chapter_path(@program, chapter) do
                          %i.fa.fa-edit
                          Editar
                      %li
                        = link_to clone_program_chapter_path(@program, chapter), method: :post, data: {confirm: '¿Estás seguro?'} do
                          %i.fa.fa-copy
                          Clonar 
                      %li
                        = link_to program_chapter_path(@program, chapter), method: :delete, data: {confirm: '¿Estás seguro?'} do
                          %i.fa.fa-times
                          Eliminar 
                  .clearfix 
                .modules-heading-body
                  %h4.m-b-0.m-t-0
                    = chapter.name
                  .hint-text.small-text
                    Lecciones:
                    %span.bold.text-primary #{chapter.lessons_count}
                    %span.p-l-10.p-r-10 
                    Preguntas:
                    %span.bold.text-primary #{chapter.questions_count}
                    %span.p-l-10.p-r-10 
                    Rúbricas de evaluación:
                    %span.bold.text-primary #{chapter.evaluations.count}

          .row.p-r-20.p-l-20
            - if @pending_content_notifications.count > 0
              = link_to  notify_changes_program_path,:method => 'post', class: 'btn btn-success pull-right m-l-10' do
                %i.fa.fa-send
                %span Enviar notificación de cambios ( #{@pending_content_notifications.count} )
            = link_to new_program_chapter_path(@program), class: 'btn btn-primary pull-right' do
              %i.fa.fa-plus
              %span Agregar módulo
          .row.p-r-20.p-l-20
            - if @pending_content_notifications.count > 0
              .small-text.text-primary.pull-right.p-t-10
                *Recuerda usar el botón de arriba para notificar que hubo cambios cuando termines de editar este programa (también puedes 
                = link_to notify_null_program_path, method: :post, data: {confirm: '¿Estás seguro?'} do
                  %u Eliminar notificaciones pendientes
                )
                             
