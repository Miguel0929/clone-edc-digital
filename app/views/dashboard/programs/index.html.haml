- content_for :title  do
  Programas - EDCdigital

.container-fluid.container-fixed-lg.top-container-padding.minus-30
  %section.demo-bg-section.p-b-15.p-t-30.panel-title-emprendimiento
    .container
      .md-p-l-20.md-p-r-20.xs-no-padding
        .row.col-md-12
          .col-sm-4.col-md-4.no-padding.xs-p-l-15.xs-p-r-15
            %h2.text-white
              =current_user.mentor? ? 'Programas' : 'Tus Programas'
          .col-sm-8.col-md-8.no-padding.resp-p-l-50.xs-p-l-15.xs-p-r-15
            %h5.text-white
              =current_user.mentor? ? 'Revisa el contenido que tus estudiantes ven ' : 'Aprende y Construye'
            %p.m-b-25.text-white
              =current_user.mentor? ? 'En esta sección podrás ver el catálogo de cursos que están vinculados a tus grupos de estudiantes. También podrás acceder a los programas como si fueras un alumno. Esto te ayudará a comprender la estructura del contenido de EDC-Digital desde la perspectiva del estudiante.' : 'Bienvenido a nuestro catálogo de cursos. Aquí encontrarás todos los programas asignados para ti por parte del equipo de EDC.'

.container-fluid.container-fixed-lg
  .row
    .col-md-12
      .panel.panel-transparent
        .panel-body   
          - if current_user.student?
            = bootstrap_form_tag(url: dashboard_programs_path, method: :get) do |f|
              .row
                .col-md-2
                  = f.select :tipo, options_for_select([['e-learning', 'elearning'], ['Construccion de idea de negocios', 'construccion'], ['Fúsion', 'fusion']], params[:tipo]), {prompt: "Todos", label: 'Tipo: ' }
                .col-md-2.col-md-offset-1
                  = f.select :level, options_for_select([['Básico', 'basico'], ['Intermedio', 'intermedio'],['Avanzado', 'avanzado']], params[:level]), {prompt: "Todos", label: 'Nivel de dificultad: ' }  
                .col-md-2.col-md-offset-1
                  = f.select :orden, options_for_select([['Tipo de Programa', 'tipo'], ['Ruta de Aprendizaje', 'ruta'],['Orden Alfabético', 'abc']], params[:orden]), {prompt: "Ordena tus programas", label: 'Orden: ' }
                .col-md-2.col-md-offset-1{:style =>"position: relative; top:20px;"}
                  = f.submit 'Filtrar programas', :class => 'btn btn-sm btn-primary programs-filter-btn' 
          %br
          - @programs.each do |p|
            - unless p.program.nil?
              .col-md-4.col-sm-6.col-xs-12.tarjeta-programa
                .card.share.share-other{"data-social" => "item"}
                  .card-content
                    %a{:href => dashboard_program_path(p.program)}
                      = image_tag(p.program.cover.url)
                    %a{:href => dashboard_program_path(p.program)}
                      .card-header.clearfix
                        %h5
                          = p.program.name
                        %h6
                          = p.program.description
                  - @current_user.programs.each do |personal|
                    - if p.program.name == personal.name
                      - seen_progress = @current_user.percentage_content_visited_for(p.program)
                      - answered_progress = @current_user.percentage_questions_answered_for(p.program)
                      .p-b-10
                        - if answered_progress == 0 && seen_progress == 0
                          .progress.m-b-5
                            .progress-bar.progress-bar-primary{:style => "width:#{answered_progress}%"}
                          .p-b-10.p-r-15.p-l-15.m-b-10.m-t-5
                            .no-margin.pull-left{:style => "color: #5B4D91;"}
                              Curso no iniciado
                        - elsif answered_progress == 0 && seen_progress > 0
                          .progress.m-b-5
                            .progress-bar.progress-bar-primary{:style => "width:#{answered_progress}%"}
                          .p-b-10.p-r-15.p-l-15.m-b-10.m-t-5
                            .no-margin.pull-right{:style => "color: #ada4d1;"}
                              #{seen_progress}% visto
                            .no-margin.pull-left{:style => "color: #5B4D91;"}
                              Curso no contestado
                        - else answered_progress > 0 && seen_progress > 0
                          .progress.m-b-5
                            .progress-bar.progress-bar-primary{:style => "width:#{answered_progress}%"}
                          .p-b-10.p-r-15.p-l-15.m-b-10.m-t-5
                            .no-margin.pull-right{:style => "color: #ada4d1;"}
                              #{seen_progress}% visto
                            .no-margin.pull-left{:style => "color: #5B4D91;"}
                              #{answered_progress}% contestado 
