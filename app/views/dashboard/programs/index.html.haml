- content_for :title  do
  Programas - EDCdigital

.container-fluid.container-fixed-lg.top-container-padding.minus-30
  %section.demo-bg-section.p-b-15.p-t-30.panel-title-emprendimiento
    .container
      .md-p-l-20.md-p-r-20.xs-no-padding
        .row.col-md-12
          .col-sm-4.col-md-4.no-padding.xs-p-l-15.xs-p-r-15
            %h2.text-white 
              Programas de Aprendizaje
          .col-sm-8.col-md-8.no-padding.resp-p-l-50.xs-p-l-15.xs-p-r-15
            %h5.text-white
              Es tiempo de construir y validar tu idea de negocio...
            %p.m-b-25.text-white
              Utiliza estos cursos de e-learning para capacitarte en términos y conceptos que te permitirán construir una idea de negocio viable en lo comercial, digital, técnico y financiero. ¡Empecemos tu emprendimiento!


  .panel
    .row
      .col-md-4
      .col-md-5
        %ul.nav.nav-tabs.nav-tabs-simple.nav-tabs-primary
          - if current_user.student?
            %li{'class'=>@activo[0]}
              %a{"aria-expanded" => "true", :href => dashboard_programs_path, class: "bold"} Todos
            %li{'class'=>@activo[1]}
              %a{"aria-expanded" => "false", :href => dashboard_programs_path(tipo: "construccion"), class: "bold"} Construcción
            %li{'class'=>@activo[2]}
              %a{"aria-expanded" => "false", :href => dashboard_programs_path(tipo: "elearning"), class: "bold"} e-Learning
      .col-md-3
.row
  .col-md-4
  .col-md-5
    #accordion.panel.panel-group.panel-transparent{"data-toggle" => "collapse"}
      .panel.panel-default.b-rad-sm
        .panel-heading
          %h4.panel-title
            %a.collapsed.b-b{"data-parent" => "#accordion", "data-toggle" => "collapse", :href => "#collapseOne"} 
              .text_ultimos_avances 
                Tus últimos avances
                %i.fa.fa-circle.opacity1
                %i.fa.fa-circle.opacity2
                %i.fa.fa-circle.opacity3
                %i.fa.fa-circle.opacity4
        #collapseOne.panel-collapse.collapse
          .panel-body.p-t-0
            .row
              .col-md-12.p-b-10.b-b
                - last_parameters = last_moved_program(@programs[0])
                - if !last_parameters[4].nil?
                  %small.m-t-0.m-b-0
                    = distance_of_time_in_words(last_parameters[1].to_i, Time.now.to_i)
                    = truncate(last_parameters[3], length: 60, separator: ' ')
                  %h4.bold.m-t-0.m-b-0
                    D7. Emprendiendo en Megatendencias
                  %small.text_ultimos_avances.m-t-0.m-b-0
                    Curso: Emprendiendo en Megatendencias
                  %small.block.p-t-10
                    %button.btn.btn-success.btn-cons Resumir (56%)  
            .row
              .col-md-12.p-t-10
                %small.m-t-0.m-b-0
                  Hace 15 días
                %h4.bold.m-t-0.m-b-0
                  D7. Emprendiendo en Megatendencias
                %small.text_ultimos_avances.m-t-0.m-b-0 
                  Curso: Emprendiendo en Megatendencias
                %small.block.p-t-10
                  %button.btn.btn-success.btn-cons Resumir (56%)
  .col-md-3
.container-fluid.container-fixed-lg
  .row
    .col-md-12
      .panel.panel-transparent.b-rad-sm
        .panel-body
          .tab-content.m-b-30
            #tabTodos.tab-pane.active
              .row
                - unless @programs.nil?    
                  - @programs.each do |program|
                    .col-md-4.col-sm-6.col-xs-12.p-l-0
                      .card.share.share-other.row{"data-social" => "item"}
                        %a{:href => dashboard_program_path(program)}
                          .card-header.card_height.text-white{ :style => "background: url(#{program.cover.url});" , class: "style_img_card" }
                            %h5.text-complete.pull-left.fs-12.demo-fs-23
                              .text-white.bold{id: "program_id#{program.id}"}
                                = program.id
                            .pull-right.small.hint-text
                              .text-white.bold
                                = program.rating
                                %i.fa.fa-star
                            .clearfix
                            %h6.m-t-name_card
                              %h6.text-top-name_card.b-b.text-white
                                - if program.tipo == "construccion"
                                  Construcción
                                -elsif program.tipo == "elearning"
                                  e-learning
                                -elsif program.tipo.nil?
                                  Emprendimiento
                              = program.name
                        %a{:href => dashboard_program_path(program)}
                        - @current_user.programs.each do |personal|
                          - if program.name == personal.name
                            - seen_progress = @current_user.percentage_content_visited_for(program)
                            - answered_progress = @current_user.percentage_questions_answered_for(program)
                            .min-height
                              - if
                                #accordion.panel.panel-group.panel-transparent{"data-toggle" => "collapse"}
                                  .panel
                                    .panel-heading.p-m_style.p-b-0
                                      %h4.panel-title.none-width
                                        %a.collapsed{"data-caja" => "#{program.id}", "data-parent" => "#accordion", "data-toggle" => "collapse", :href => "#collapsee#{program.id}"}
                                      %button.btn.btn-success
                                        -if seen_progress == 0 
                                          Comenzar
                                          %i.fa.fa-play.font-size-play
                                        -elsif seen_progress > 0 && seen_progress < 100
                                          Continuar
                                          (#{seen_progress}%)
                                        -elsif seen_progress == 100 && answered_progress < 100
                                          Continuar
                                          (#{answered_progress}%)
                                        -elsif seen_progress == 100 && answered_progress == 100
                                          Completado
                                      .ver.inline-block.bold.text_mostrar-ocultar_info.m-l-50
                                        Más información
                                    .panel-collapse.collapse{:id => "collapsee#{program.id}"}
                                      .panel-body
                                        .b-t.p-t-5
                                          = program.description
                                        .pull-left
                                          .m-t-10.bold
                                            #{answered_progress}% contestado
                                          .progress.m-b-5
                                            .progress-bar.progress-bar-primary{:style => "width:#{answered_progress}%"}
                                        .pull-right
                                          .m-t-10.bold
                                            (#{seen_progress}%) visto


                              
            #tabConstruccion.tab-pane
              .p 
                Construcción                     
            #tab-e-learning.tab-pane
              .p e-Learning
:javascript
  var y = true;
  $( "a.collapsed" ).click(function() {
    console.log($(this).data("caja"))
    y = !y;
    if(y){
      $(".ver").text("Más información");
    } else {
      $(".ver").text("Ocultar información");
    }
  });

